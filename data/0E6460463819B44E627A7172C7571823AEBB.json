{"uid":"0E6460463819B44E627A7172C7571823AEBB","isLoaded":true,"lastModificationTime":0,"items":{"name":"Helpers","type":"objj_script","parentId":"DB2D3154KEE4EA43BCSBC59ED3B462A07998","order":4,"content":"Z2xvYmFsLkdTLlZOLnNob3dEb2N1bWVudEV4dGVybmFsID0gZnVuY3Rpb24odWlkKQp7CiAgICB2YXIgZG9jdW1lbnQgPSAoKF9fX3IxID0gR1NEb2N1bWVudE1hbmFnZXIuaXNhLm9iampfbXNnU2VuZDAoR1NEb2N1bWVudE1hbmFnZXIsICJkZWZhdWx0TWFuYWdlciIpKSwgX19fcjEgPT0gbnVsbCA/IG51bGwgOiBfX19yMS5pc2Eub2Jqal9tc2dTZW5kMShfX19yMSwgImRvY3VtZW50QnlVaWQ6IiwgdWlkKSk7CiAgICBpZiAoZG9jdW1lbnQpCiAgICAgICAgKChfX19yMSA9IEdTRG9jdW1lbnRNYW5hZ2VyLmlzYS5vYmpqX21zZ1NlbmQwKEdTRG9jdW1lbnRNYW5hZ2VyLCAiZGVmYXVsdE1hbmFnZXIiKSksIF9fX3IxID09IG51bGwgPyBudWxsIDogX19fcjEuaXNhLm9iampfbXNnU2VuZDEoX19fcjEsICJzaG93RG9jdW1lbnRFeHRlcm5hbDoiLCBkb2N1bWVudCkpOwogICAgdmFyIF9fX3IxOwp9OwpnbG9iYWwuR1MuVk4uaW1hZ2VGb3JBbmltYXRpb24gPSBmdW5jdGlvbihpbWFnZSwgYW5pbWF0aW9uSWQpCnsKICAgIHZhciBhbmltYXRpb24gPSAoKF9fX3IxID0gR1NEYXRhYmFzZS5pc2Eub2Jqal9tc2dTZW5kMChHU0RhdGFiYXNlLCAiZGVmYXVsdERhdGFiYXNlIikpLCBfX19yMSA9PSBudWxsID8gbnVsbCA6IF9fX3IxLmlzYS5vYmpqX21zZ1NlbmQwKF9fX3IxLCAicmVjb3JkQ29sbGVjdGlvbnMiKSkuYW5pbWF0aW9uc1thbmltYXRpb25JZF07CiAgICB2YXIgc2l6ZSA9IChpbWFnZSA9PSBudWxsID8gbnVsbCA6IGltYWdlLmlzYS5vYmpqX21zZ1NlbmQwKGltYWdlLCAic2l6ZSIpKTsKICAgIHZhciByZXN1bHQgPSBudWxsOwogICAgaWYgKGFuaW1hdGlvbikKICAgIHsKICAgICAgICBzaXplID0gQ0dTaXplTWFrZShGTE9PUihzaXplLndpZHRoIC8gYW5pbWF0aW9uLmZyYW1lc1gpLCBGTE9PUihzaXplLmhlaWdodCAvIGFuaW1hdGlvbi5mcmFtZXNZKSk7CiAgICAgICAgcmVzdWx0ID0gKChfX19yMSA9IENQSW1hZ2UuaXNhLm9iampfbXNnU2VuZDAoQ1BJbWFnZSwgImFsbG9jIikpLCBfX19yMSA9PSBudWxsID8gbnVsbCA6IF9fX3IxLmlzYS5vYmpqX21zZ1NlbmQxKF9fX3IxLCAiaW5pdFdpdGhTaXplOiIsIHNpemUpKTsKICAgICAgICBDR0NvbnRleHREcmF3U3ViSW1hZ2UoKHJlc3VsdCA9PSBudWxsID8gbnVsbCA6IHJlc3VsdC5pc2Eub2Jqal9tc2dTZW5kMChyZXN1bHQsICJjb250ZXh0IikpLCBDR1JlY3RNYWtlKDAsIDAsIHNpemUud2lkdGgsIHNpemUuaGVpZ2h0KSwgQ0dSZWN0TWFrZSgwLCAwLCBzaXplLndpZHRoLCBzaXplLmhlaWdodCksIGltYWdlKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICByZXN1bHQgPSBpbWFnZTsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgICB2YXIgX19fcjE7Cn07Cmdsb2JhbC5HUy5WTi5kZWZhdWx0UmVjb3JkSWQgPSBmdW5jdGlvbihjb2xsZWN0aW9uKQp7CiAgICB2YXIgcmVzdWx0ID0gbmlsOwogICAgdmFyIHJlY29yZHMgPSAoKF9fX3IxID0gR1NEYXRhYmFzZS5pc2Eub2Jqal9tc2dTZW5kMChHU0RhdGFiYXNlLCAiZGVmYXVsdERhdGFiYXNlIikpLCBfX19yMSA9PSBudWxsID8gbnVsbCA6IF9fX3IxLmlzYS5vYmpqX21zZ1NlbmQwKF9fX3IxLCAicmVjb3JkRG9jdW1lbnRBcnJheXMiKSlbY29sbGVjdGlvbl07CiAgICBpZiAocmVjb3JkcykKICAgICAgICByZXN1bHQgPSAoKF9fX3IxID0gcmVjb3Jkc1swXSksIF9fX3IxID09IG51bGwgPyBudWxsIDogX19fcjEuaXNhLm9iampfbXNnU2VuZDAoX19fcjEsICJ1aWQiKSk7CiAgICByZXR1cm4gcmVzdWx0OwogICAgdmFyIF9fX3IxOwp9Owo=","rawContent":"global.GS.VN.showDocumentExternal = function(uid) {\n    \n    var document = [[GSDocumentManager defaultManager] documentByUid:uid];\n    \n    if(document)\n        [[GSDocumentManager defaultManager] showDocumentExternal:document];\n}\n\nglobal.GS.VN.imageForAnimation = function(image, animationId) {\n    var animation = [[GSDatabase defaultDatabase] recordCollections].animations[animationId];\n    var size = [image size];\n    var result = null;\n    \n    if(animation)\n    {\n        size = CGSizeMake(FLOOR(size.width / animation.framesX), FLOOR(size.height / animation.framesY))\n        result = [[CPImage alloc] initWithSize:size];\n                                                       \n        CGContextDrawSubImage([result context], CGRectMake(0, 0, size.width, size.height), CGRectMake(0, 0, size.width, size.height), image)                                                      \n    }\n    else\n    {\n        result = image;\n    }\n    \n    return result;\n}\n\nglobal.GS.VN.defaultRecordId = function(collection)    \n{\n    var result = nil;\n    var records = [[GSDatabase defaultDatabase] recordDocumentArrays][collection];\n    \n    if(records)\n        result = [records[0] uid];\n        \n    return result;\n}\n"},"summary":["name","type"]}