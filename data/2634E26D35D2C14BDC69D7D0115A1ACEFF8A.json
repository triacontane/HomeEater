{
    "uid": "2634E26D35D2C14BDC69D7D0115A1ACEFF8A",
    "isLoaded": true,
    "lastModificationTime": 0,
    "items": {
        "name": "Component_DomainContainer",
        "type": "game_script",
        "order": 2,
        "content": "# ===================================================================\n#\n#   Script: Component_Container\n#\n#   $$COPYRIGHT$$\n#\n# ===================================================================\nclass Component_DomainContainer extends gs.Component_Container\n    ###*\n    * A container component allows an object to have sub-objects.\n    * @module gs\n    * @class Component_DomainContainer\n    * @memberof gs\n    * @constructor\n    ###\n    constructor: (disposeBehavior) ->\n        super(disposeBehavior)\n        \n        ###*\n        * The current domain. The default domain is an empty string. Please use\n        * <b>changeDomain</b> to change the current domain.\n        * @property domain\n        * @readOnly\n        ###\n        @domain = \"com.degica.vnm.default\"\n        @domains = [\"com.degica.vnm.default\"]\n     \n    ###*\n    * Changes the component and all sub-objects.\n    * @method changeDomain\n    * @param {string} domain - The domain to change to.\n    ###   \n    dispose: ->\n        super\n        \n        for domain in @domains\n            if domain != @domain\n                @object.subObjects = @object.subObjectsByDomain[domain]\n                @object.disposeObjects()\n        @object.subObjects = @object.subObjectsByDomain[@domain]\n        \n    ###*\n    * Changes the current domain.\n    * @method changeDomain\n    * @param {string} domain - The domain to change to.\n    ###   \n    changeDomain: (domain) ->\n        @domain = domain\n        objects = @object.subObjectsByDomain[domain]\n        if !objects\n            objects = @object.subObjectsByDomain[domain] = []\n            @domains = Object.keys(@object.subObjectsByDomain)\n            \n        @object.subObjects = objects\n    \n    ###*\n    * Sets the visibility of all sub objects of all domains.\n    * @method setVisible\n    * @param {boolean} visible - The new visibility.\n    ###\n    setVisible: (visible) ->\n        for domain in @domains\n            subObjects = @object.subObjectsByDomain[domain]\n            if subObjects then for subObject in subObjects\n                if subObject\n                    subObject.visible = visible\n                    subObject.update()\n                \n    ###*\n    * Updates all sub-objects and sorts them if necessary. It also removes\n    * disposed objects from the list of sub-objects.\n    * @method update\n    ###\n    update: ->\n        for domain in @domains\n            subObjects = @object.subObjectsByDomain[domain]\n\n            i = 0\n            while i < subObjects.length\n                subObject = subObjects[i]\n                if subObject?.active\n                    if subObject.disposed\n                        subObjects[i] = null\n                    else\n                        subObject.update()\n                i++\n                \n        return null\n                \n        \n        \ngs.Component_DomainContainer = Component_DomainContainer\n",
        "parentId": "D3325122KACDEA4515SB731E37A42B9D779F",
        "folder": false,
        "scriptType": 0,
        "compiledContent": "var Component_DomainContainer,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nComponent_DomainContainer = (function(superClass) {\n  extend(Component_DomainContainer, superClass);\n\n\n  /**\n  * A container component allows an object to have sub-objects.\n  * @module gs\n  * @class Component_DomainContainer\n  * @memberof gs\n  * @constructor\n   */\n\n  function Component_DomainContainer(disposeBehavior) {\n    Component_DomainContainer.__super__.constructor.call(this, disposeBehavior);\n\n    /**\n    * The current domain. The default domain is an empty string. Please use\n    * <b>changeDomain</b> to change the current domain.\n    * @property domain\n    * @readOnly\n     */\n    this.domain = \"com.degica.vnm.default\";\n    this.domains = [\"com.degica.vnm.default\"];\n  }\n\n\n  /**\n  * Changes the component and all sub-objects.\n  * @method changeDomain\n  * @param {string} domain - The domain to change to.\n   */\n\n  Component_DomainContainer.prototype.dispose = function() {\n    var domain, j, len, ref;\n    Component_DomainContainer.__super__.dispose.apply(this, arguments);\n    ref = this.domains;\n    for (j = 0, len = ref.length; j < len; j++) {\n      domain = ref[j];\n      if (domain !== this.domain) {\n        this.object.subObjects = this.object.subObjectsByDomain[domain];\n        this.object.disposeObjects();\n      }\n    }\n    return this.object.subObjects = this.object.subObjectsByDomain[this.domain];\n  };\n\n\n  /**\n  * Changes the current domain.\n  * @method changeDomain\n  * @param {string} domain - The domain to change to.\n   */\n\n  Component_DomainContainer.prototype.changeDomain = function(domain) {\n    var objects;\n    this.domain = domain;\n    objects = this.object.subObjectsByDomain[domain];\n    if (!objects) {\n      objects = this.object.subObjectsByDomain[domain] = [];\n      this.domains = Object.keys(this.object.subObjectsByDomain);\n    }\n    return this.object.subObjects = objects;\n  };\n\n\n  /**\n  * Sets the visibility of all sub objects of all domains.\n  * @method setVisible\n  * @param {boolean} visible - The new visibility.\n   */\n\n  Component_DomainContainer.prototype.setVisible = function(visible) {\n    var domain, j, len, ref, results, subObject, subObjects;\n    ref = this.domains;\n    results = [];\n    for (j = 0, len = ref.length; j < len; j++) {\n      domain = ref[j];\n      subObjects = this.object.subObjectsByDomain[domain];\n      if (subObjects) {\n        results.push((function() {\n          var k, len1, results1;\n          results1 = [];\n          for (k = 0, len1 = subObjects.length; k < len1; k++) {\n            subObject = subObjects[k];\n            if (subObject) {\n              subObject.visible = visible;\n              results1.push(subObject.update());\n            } else {\n              results1.push(void 0);\n            }\n          }\n          return results1;\n        })());\n      } else {\n        results.push(void 0);\n      }\n    }\n    return results;\n  };\n\n\n  /**\n  * Updates all sub-objects and sorts them if necessary. It also removes\n  * disposed objects from the list of sub-objects.\n  * @method update\n   */\n\n  Component_DomainContainer.prototype.update = function() {\n    var domain, i, j, len, ref, subObject, subObjects;\n    ref = this.domains;\n    for (j = 0, len = ref.length; j < len; j++) {\n      domain = ref[j];\n      subObjects = this.object.subObjectsByDomain[domain];\n      i = 0;\n      while (i < subObjects.length) {\n        subObject = subObjects[i];\n        if (subObject != null ? subObject.active : void 0) {\n          if (subObject.disposed) {\n            subObjects[i] = null;\n          } else {\n            subObject.update();\n          }\n        }\n        i++;\n      }\n    }\n    return null;\n  };\n\n  return Component_DomainContainer;\n\n})(gs.Component_Container);\n\ngs.Component_DomainContainer = Component_DomainContainer;\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU9BLElBQUEseUJBQUE7RUFBQTs7O0FBQU07Ozs7QUFDRjs7Ozs7Ozs7RUFPYSxtQ0FBQyxlQUFEO0lBQ1QsMkRBQU0sZUFBTjs7QUFFQTs7Ozs7O0lBTUEsSUFBQyxDQUFBLE1BQUQsR0FBVTtJQUNWLElBQUMsQ0FBQSxPQUFELEdBQVcsQ0FBQyx3QkFBRDtFQVZGOzs7QUFZYjs7Ozs7O3NDQUtBLE9BQUEsR0FBUyxTQUFBO0FBQ0wsUUFBQTtJQUFBLHdEQUFBLFNBQUE7QUFFQTtBQUFBLFNBQUEscUNBQUE7O01BQ0ksSUFBRyxNQUFBLEtBQVUsSUFBQyxDQUFBLE1BQWQ7UUFDSSxJQUFDLENBQUEsTUFBTSxDQUFDLFVBQVIsR0FBcUIsSUFBQyxDQUFBLE1BQU0sQ0FBQyxrQkFBbUIsQ0FBQSxNQUFBO1FBQ2hELElBQUMsQ0FBQSxNQUFNLENBQUMsY0FBUixDQUFBLEVBRko7O0FBREo7V0FJQSxJQUFDLENBQUEsTUFBTSxDQUFDLFVBQVIsR0FBcUIsSUFBQyxDQUFBLE1BQU0sQ0FBQyxrQkFBbUIsQ0FBQSxJQUFDLENBQUEsTUFBRDtFQVAzQzs7O0FBU1Q7Ozs7OztzQ0FLQSxZQUFBLEdBQWMsU0FBQyxNQUFEO0FBQ1YsUUFBQTtJQUFBLElBQUMsQ0FBQSxNQUFELEdBQVU7SUFDVixPQUFBLEdBQVUsSUFBQyxDQUFBLE1BQU0sQ0FBQyxrQkFBbUIsQ0FBQSxNQUFBO0lBQ3JDLElBQUcsQ0FBQyxPQUFKO01BQ0ksT0FBQSxHQUFVLElBQUMsQ0FBQSxNQUFNLENBQUMsa0JBQW1CLENBQUEsTUFBQSxDQUEzQixHQUFxQztNQUMvQyxJQUFDLENBQUEsT0FBRCxHQUFXLE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBQyxDQUFBLE1BQU0sQ0FBQyxrQkFBcEIsRUFGZjs7V0FJQSxJQUFDLENBQUEsTUFBTSxDQUFDLFVBQVIsR0FBcUI7RUFQWDs7O0FBU2Q7Ozs7OztzQ0FLQSxVQUFBLEdBQVksU0FBQyxPQUFEO0FBQ1IsUUFBQTtBQUFBO0FBQUE7U0FBQSxxQ0FBQTs7TUFDSSxVQUFBLEdBQWEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxrQkFBbUIsQ0FBQSxNQUFBO01BQ3hDLElBQUcsVUFBSDs7O0FBQW1CO2VBQUEsOENBQUE7O1lBQ2YsSUFBRyxTQUFIO2NBQ0ksU0FBUyxDQUFDLE9BQVYsR0FBb0I7NEJBQ3BCLFNBQVMsQ0FBQyxNQUFWLENBQUEsR0FGSjthQUFBLE1BQUE7b0NBQUE7O0FBRGU7O2NBQW5CO09BQUEsTUFBQTs2QkFBQTs7QUFGSjs7RUFEUTs7O0FBUVo7Ozs7OztzQ0FLQSxNQUFBLEdBQVEsU0FBQTtBQUNKLFFBQUE7QUFBQTtBQUFBLFNBQUEscUNBQUE7O01BQ0ksVUFBQSxHQUFhLElBQUMsQ0FBQSxNQUFNLENBQUMsa0JBQW1CLENBQUEsTUFBQTtNQUV4QyxDQUFBLEdBQUk7QUFDSixhQUFNLENBQUEsR0FBSSxVQUFVLENBQUMsTUFBckI7UUFDSSxTQUFBLEdBQVksVUFBVyxDQUFBLENBQUE7UUFDdkIsd0JBQUcsU0FBUyxDQUFFLGVBQWQ7VUFDSSxJQUFHLFNBQVMsQ0FBQyxRQUFiO1lBQ0ksVUFBVyxDQUFBLENBQUEsQ0FBWCxHQUFnQixLQURwQjtXQUFBLE1BQUE7WUFHSSxTQUFTLENBQUMsTUFBVixDQUFBLEVBSEo7V0FESjs7UUFLQSxDQUFBO01BUEo7QUFKSjtBQWFBLFdBQU87RUFkSDs7OztHQWxFNEIsRUFBRSxDQUFDOztBQW9GM0MsRUFBRSxDQUFDLHlCQUFILEdBQStCIiwic291cmNlc0NvbnRlbnQiOlsiIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4jXG4jICAgU2NyaXB0OiBDb21wb25lbnRfQ29udGFpbmVyXG4jXG4jICAgJCRDT1BZUklHSFQkJFxuI1xuIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBDb21wb25lbnRfRG9tYWluQ29udGFpbmVyIGV4dGVuZHMgZ3MuQ29tcG9uZW50X0NvbnRhaW5lclxuICAgICMjIypcbiAgICAqIEEgY29udGFpbmVyIGNvbXBvbmVudCBhbGxvd3MgYW4gb2JqZWN0IHRvIGhhdmUgc3ViLW9iamVjdHMuXG4gICAgKiBAbW9kdWxlIGdzXG4gICAgKiBAY2xhc3MgQ29tcG9uZW50X0RvbWFpbkNvbnRhaW5lclxuICAgICogQG1lbWJlcm9mIGdzXG4gICAgKiBAY29uc3RydWN0b3JcbiAgICAjIyNcbiAgICBjb25zdHJ1Y3RvcjogKGRpc3Bvc2VCZWhhdmlvcikgLT5cbiAgICAgICAgc3VwZXIoZGlzcG9zZUJlaGF2aW9yKVxuICAgICAgICBcbiAgICAgICAgIyMjKlxuICAgICAgICAqIFRoZSBjdXJyZW50IGRvbWFpbi4gVGhlIGRlZmF1bHQgZG9tYWluIGlzIGFuIGVtcHR5IHN0cmluZy4gUGxlYXNlIHVzZVxuICAgICAgICAqIDxiPmNoYW5nZURvbWFpbjwvYj4gdG8gY2hhbmdlIHRoZSBjdXJyZW50IGRvbWFpbi5cbiAgICAgICAgKiBAcHJvcGVydHkgZG9tYWluXG4gICAgICAgICogQHJlYWRPbmx5XG4gICAgICAgICMjI1xuICAgICAgICBAZG9tYWluID0gXCJjb20uZGVnaWNhLnZubS5kZWZhdWx0XCJcbiAgICAgICAgQGRvbWFpbnMgPSBbXCJjb20uZGVnaWNhLnZubS5kZWZhdWx0XCJdXG4gICAgIFxuICAgICMjIypcbiAgICAqIENoYW5nZXMgdGhlIGNvbXBvbmVudCBhbmQgYWxsIHN1Yi1vYmplY3RzLlxuICAgICogQG1ldGhvZCBjaGFuZ2VEb21haW5cbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW4gLSBUaGUgZG9tYWluIHRvIGNoYW5nZSB0by5cbiAgICAjIyMgICBcbiAgICBkaXNwb3NlOiAtPlxuICAgICAgICBzdXBlclxuICAgICAgICBcbiAgICAgICAgZm9yIGRvbWFpbiBpbiBAZG9tYWluc1xuICAgICAgICAgICAgaWYgZG9tYWluICE9IEBkb21haW5cbiAgICAgICAgICAgICAgICBAb2JqZWN0LnN1Yk9iamVjdHMgPSBAb2JqZWN0LnN1Yk9iamVjdHNCeURvbWFpbltkb21haW5dXG4gICAgICAgICAgICAgICAgQG9iamVjdC5kaXNwb3NlT2JqZWN0cygpXG4gICAgICAgIEBvYmplY3Quc3ViT2JqZWN0cyA9IEBvYmplY3Quc3ViT2JqZWN0c0J5RG9tYWluW0Bkb21haW5dXG4gICAgICAgIFxuICAgICMjIypcbiAgICAqIENoYW5nZXMgdGhlIGN1cnJlbnQgZG9tYWluLlxuICAgICogQG1ldGhvZCBjaGFuZ2VEb21haW5cbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW4gLSBUaGUgZG9tYWluIHRvIGNoYW5nZSB0by5cbiAgICAjIyMgICBcbiAgICBjaGFuZ2VEb21haW46IChkb21haW4pIC0+XG4gICAgICAgIEBkb21haW4gPSBkb21haW5cbiAgICAgICAgb2JqZWN0cyA9IEBvYmplY3Quc3ViT2JqZWN0c0J5RG9tYWluW2RvbWFpbl1cbiAgICAgICAgaWYgIW9iamVjdHNcbiAgICAgICAgICAgIG9iamVjdHMgPSBAb2JqZWN0LnN1Yk9iamVjdHNCeURvbWFpbltkb21haW5dID0gW11cbiAgICAgICAgICAgIEBkb21haW5zID0gT2JqZWN0LmtleXMoQG9iamVjdC5zdWJPYmplY3RzQnlEb21haW4pXG4gICAgICAgICAgICBcbiAgICAgICAgQG9iamVjdC5zdWJPYmplY3RzID0gb2JqZWN0c1xuICAgIFxuICAgICMjIypcbiAgICAqIFNldHMgdGhlIHZpc2liaWxpdHkgb2YgYWxsIHN1YiBvYmplY3RzIG9mIGFsbCBkb21haW5zLlxuICAgICogQG1ldGhvZCBzZXRWaXNpYmxlXG4gICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZpc2libGUgLSBUaGUgbmV3IHZpc2liaWxpdHkuXG4gICAgIyMjXG4gICAgc2V0VmlzaWJsZTogKHZpc2libGUpIC0+XG4gICAgICAgIGZvciBkb21haW4gaW4gQGRvbWFpbnNcbiAgICAgICAgICAgIHN1Yk9iamVjdHMgPSBAb2JqZWN0LnN1Yk9iamVjdHNCeURvbWFpbltkb21haW5dXG4gICAgICAgICAgICBpZiBzdWJPYmplY3RzIHRoZW4gZm9yIHN1Yk9iamVjdCBpbiBzdWJPYmplY3RzXG4gICAgICAgICAgICAgICAgaWYgc3ViT2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIHN1Yk9iamVjdC52aXNpYmxlID0gdmlzaWJsZVxuICAgICAgICAgICAgICAgICAgICBzdWJPYmplY3QudXBkYXRlKClcbiAgICAgICAgICAgICAgICBcbiAgICAjIyMqXG4gICAgKiBVcGRhdGVzIGFsbCBzdWItb2JqZWN0cyBhbmQgc29ydHMgdGhlbSBpZiBuZWNlc3NhcnkuIEl0IGFsc28gcmVtb3Zlc1xuICAgICogZGlzcG9zZWQgb2JqZWN0cyBmcm9tIHRoZSBsaXN0IG9mIHN1Yi1vYmplY3RzLlxuICAgICogQG1ldGhvZCB1cGRhdGVcbiAgICAjIyNcbiAgICB1cGRhdGU6IC0+XG4gICAgICAgIGZvciBkb21haW4gaW4gQGRvbWFpbnNcbiAgICAgICAgICAgIHN1Yk9iamVjdHMgPSBAb2JqZWN0LnN1Yk9iamVjdHNCeURvbWFpbltkb21haW5dXG5cbiAgICAgICAgICAgIGkgPSAwXG4gICAgICAgICAgICB3aGlsZSBpIDwgc3ViT2JqZWN0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICBzdWJPYmplY3QgPSBzdWJPYmplY3RzW2ldXG4gICAgICAgICAgICAgICAgaWYgc3ViT2JqZWN0Py5hY3RpdmVcbiAgICAgICAgICAgICAgICAgICAgaWYgc3ViT2JqZWN0LmRpc3Bvc2VkXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJPYmplY3RzW2ldID0gbnVsbFxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJPYmplY3QudXBkYXRlKClcbiAgICAgICAgICAgICAgICBpKytcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuZ3MuQ29tcG9uZW50X0RvbWFpbkNvbnRhaW5lciA9IENvbXBvbmVudF9Eb21haW5Db250YWluZXJcbiJdfQ==\n//# sourceURL=Component_DomainContainer_39.js"
    },
    "summary": [
        "name",
        "type"
    ]
}